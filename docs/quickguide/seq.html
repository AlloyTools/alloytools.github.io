<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/alloytools.github.io/assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="alloy" href="/alloytools.github.io/feed.xml">
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
  
    
    
    <a class="site-title" href="/alloytools.github.io/">alloy</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/about.html">about</a>
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/applications.html">uses</a>
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/book.html">book</a>
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/community.html">community</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/documentation.html">docs</a>
            
          
            
            
            <a class="page-link" href="/alloytools.github.io/download.html">download</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">sequence of atoms</h1>
  </header>

  <div class="post-content">
    <p>A new reserved keyword “seq” has been added for declaring a field as a sequence of atoms. In the following example, for each person p, “p.books” is a sequence of Book:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sig Book { }
sig Person {
	books: seq Book
}
</code></pre></div></div>

<p>The actual type of a sequence of Book is “Int-&gt;Book”. So if s is a sequence of Book, then the first element is s[0] and you can get the set of all elements by writing “univ.s”</p>

<p>You can also use “seq” in existential quantifications, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>some s: seq Book | FORMULA
</code></pre></div></div>

<p>Currently, the Alloy Analyzer does not support analysis of a model with universal quantifiers over sets or relations (including sequences).</p>

<p>You can also use “seq” in function argument declaration, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun getAllElements [s: seq Book] : set Book {
  univ.s
}
</code></pre></div></div>

<p>Just like the other multiplicity symbols, when you use “seq” in a function argument declaration, we do not enforce that you always call the function/predicate with a well-formed sequence. So it is only for documentation purpose, to denote s is a binary relation from Int-&gt;Book.</p>

<p>Note: for effifiency, we bound the length of allowed sequences. You can change this bound by setting the scope on “seq”. For example, if you want to allow sequences of up to 4 elements, you write</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>check SomeAssertion for 4 seq
</code></pre></div></div>

<p>To make it easier to manipulate sequences, we provide a number of helper functions: (these are defined in the pre-included util/sequniv.als file)</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>#s</strong></td>
      <td>Return the number of elements in sequence s.</td>
    </tr>
    <tr>
      <td><strong>s.elems</strong></td>
      <td>Return the set of elements in sequence s.</td>
    </tr>
    <tr>
      <td><strong>s.first</strong></td>
      <td>If #s &gt; 0, it returns the first element of s. Otherwise, it returns the empty set</td>
    </tr>
    <tr>
      <td><strong>s.last</strong></td>
      <td>If #s &gt; 0, it returns the last element of s. Otherwise, it returns the empty set</td>
    </tr>
    <tr>
      <td><strong>s.rest</strong></td>
      <td>If #s &gt; 1, it returns s with its first element removed. Otherwise, it returns the empty sequence</td>
    </tr>
    <tr>
      <td><strong>s.butlast</strong></td>
      <td>If #s &gt; 1, it returns s with its last element removed. Otherwise, it returns the empty sequence</td>
    </tr>
    <tr>
      <td><strong>s.isEmpty</strong></td>
      <td>It returns true if #s==0.</td>
    </tr>
    <tr>
      <td><strong>s.hasDups</strong></td>
      <td>It returns true if s contains duplicate elements.</td>
    </tr>
    <tr>
      <td><strong>s.inds</strong></td>
      <td>If #s &gt; 0, it returns the set of integers <code class="language-plaintext highlighter-rouge">{0 .. (#s)-1}</code>. Otherwise, it returns the empty set</td>
    </tr>
    <tr>
      <td><strong>s.lastIdx</strong></td>
      <td>If #s &gt; 0, it returns the integer <code class="language-plaintext highlighter-rouge">(#s)-1</code>. Otherwise, it returns the empty set</td>
    </tr>
    <tr>
      <td><strong>s.afterLastIdx</strong></td>
      <td>If (#s &lt; the longest allowed sequence length), it returns <code class="language-plaintext highlighter-rouge">#s</code>. Otherwise, it returns the empty set</td>
    </tr>
    <tr>
      <td><strong>s.idxOf [x]</strong></td>
      <td>If x does not appear in s, it returns the empty set. Otherwise, it returns the first index where x appears in s.</td>
    </tr>
    <tr>
      <td><strong>s.lastIdxOf [x]</strong></td>
      <td>If x does not appear in s, it returns the empty set. Otherwise, it returns the last index where x appears in s.</td>
    </tr>
    <tr>
      <td><strong>s.indsOf [x]</strong></td>
      <td>If x does not appear in s, it returns the empty set. Otherwise, it returns the set of indices where x appears in s.</td>
    </tr>
    <tr>
      <td><strong>s.add [x]</strong></td>
      <td>If (#s &lt; the longest allowed sequence length), it appends x to s. Otherwise, it returns s.</td>
    </tr>
    <tr>
      <td><strong>s.setAt [i, x]</strong></td>
      <td>Precondition: 0 &lt;= i &lt;= #s. It returns a new sequence where the i-th entry is changed to x. Unsatisfiable if precondition is not satisfied.</td>
    </tr>
    <tr>
      <td><strong>s.insert [i, x]</strong></td>
      <td>Precondition: 0 &lt;= i &lt;= #s. It returns a new sequence where x is inserted at index i. Unsatisfiable if precondition is not satisfied. <em>Note:</em> if #s was already equal to the longest allowed sequence length, then the last element of s will be removed first.</td>
    </tr>
    <tr>
      <td><strong>s.delete [i]</strong></td>
      <td>Precondition: 0 &lt;= i. It returns the result of deleting the element at index i. Unsatisfiable if precondition is not satisfied. <em>Note:</em> if i &gt;= #s, the input sequence is returned.</td>
    </tr>
    <tr>
      <td><strong>a.append [b]</strong></td>
      <td>Returns the result of concatenating sequence a and sequence b. (If the resulting sequence is too longer, it will be truncated)</td>
    </tr>
    <tr>
      <td><strong>s.subseq [from, to]</strong></td>
      <td>Returns the subsequence between from and to, inclusively. <em>Note:</em> if the bounds are not within the sequence’s limits, i.e., from &lt; 0 or to &gt;= #s, then the empty sequence is returned.</td>
    </tr>
  </tbody>
</table>

  </div>

</article>

      </div>
    </main>

    <footer class="site-footer">

	<table  style="border:none; color:#CCC">
		<colgroup>
			<col style="witdh:33%"/>
			<col style="witdh:34%"/>
			<col style="witdh:33%"/>
		</colgroup>
		<tr>
			<td  style="border:none;text-align:left;">© 2019 AlloyTools</td>
			<td style="border:none;text-center;"><a href="https://groups.google.com/forum/#!forum/alloytools">Forum</a></td>
			<td style="border:none;text-align:right;">
				<a href="https://github.com/AlloyTools"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">AlloyTools</span></a>

			</td>			
		</tr>
	</table>

</footer>


  </body>

</html>
